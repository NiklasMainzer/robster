<iframe id="spotifyPlayer" frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
</iframe>

<script>
    function getSongID() {
        const params = new URLSearchParams(window.location.search);
        return params.get("song");
    }

    function loadSong() {
        const songID = getSongID();
        if (songID) {
            // Force desktop version of Spotify embed
            document.getElementById("spotifyPlayer").src = `https://open.spotify.com/embed/track/${songID}?utm_source=generator`;
        } else {
            document.body.innerHTML = "<h2>Invalid Song ID</h2>";
        }
    }

    // Force desktop mode on mobile
    if (window.innerWidth < 768) {
        document.getElementById("spotifyPlayer").src = document.getElementById("spotifyPlayer").src.replace("embed/", "embed/track/");
    }

    loadSong();
</script>
